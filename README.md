# stage_robot_vacuum
ロボットシミュレータstageを用いたロボット競技用のROSパッケージです．大学の講義にてロボットアプリケーション開発の経験を積む目的で作成されました．競技内容については下記をご覧ください．

[中部大学ロボット理工学科 演習HP]( https://robot.isc.chubu.ac.jp/?p=1469)

ROSにおけるパッケージの扱い方，ノードの作成方法，トピック通信，ロボット制御，画像処理を学んだ上で課題を実施すると，効率良くROSを学ぶことができます．
講義で使用する目的で作成したパッケージですが，自由にご使用ください．

## 概要
競技のテーマは「お掃除ロボットの開発」です．スタート地点からゴール地点まで障害物を回避しながら走行しましょう．
早くゴール地点に到着することで多くのスコアを獲得することができます．
また，マップの途中に通過ポイント(ごみ)を設けてます．
通過ポイント付近をロボットが走行することでごみを回収し，スコアを獲得することができます．
より多くのスコアを獲得できるような自律移動ロボットのアプリケーションを開発しましょう．

## 動作環境
* Ubuntu 16.04
* ROS Kinetic Kame

もしくは，

* Ubuntu 18.04
* ROS Melodic Morenia

他の環境では動作未確認です．

## インストール
Ubuntuのインストールについては省略します．
ROSは，[公式HP](https://www.ros.org)にて推奨されているデスクトップ環境(desktop-full)をインストールすることで本パッケージは動作します．
画像処理やナビゲーションに取り組む場合には，必要なパッケージを各々でインストールしてください．

本リポジトリはROSのパッケージが含まれています．
ワークスペースの「src」ディレクトリにパッケージをダウンロードすることで使用することができます．
gitを用いたコマンドで簡単にダウンロードすることができます．

```
$ git clone https://github.com/yuu31/stage_robot_vacuum.git
```

## 起動方法
まずは下記のコマンドにより本パッケージをビルド，及び環境変数を設定してください．
下記の例では，ホームディレクトリにワークスペースがある場合の例です．
「WORK_SPACE」は所望のワークスペースを使用してください．
```
$ cd ~/WORK_SPACE
$ catkin_make
$ source devel/setup.bash
```

本パッケージを実行する際には，roslaunchコマンドで必要なノード群を起動してください．
下記のコマンドを実行することで，ロボットシミュレータstageとパッケージ実行に必要なノード2つが起動します．
```
$ roslaunch stage_robot_vacuum run_task.launch
```

## ノード一覧
本パッケージに含まれるノードは下記の通りです．

| ノード名 | プログラム | 内容 |
|:-----------|:------------|:------------|
| worker1 | rontrol_robot_node.cpp | stage上のロボットを制御するためのノード |
| manager | stage_manager_node.py     | 競技用のノード．ゴール地点やチェックポイントの管理，スコア計算，時間計測等を処理するノード． |

## トピック一覧
上記ノードが配信するトピックは下記の通りです．

| トピック一覧 | 内容 |
|:-----------|:------------|
| check_point     | 通過ポイント1の座標． 通過ポイントに近づくことで座標が配信される．|
| check_signal | 通過ポイント2に到達した際に「1(True)」を配信するとスコアを獲得可能．デフォルトでは「0(False)を配信．」 |
| goal_point     | ゴール地点の座標． |


## 関連URL
* [中部大学ロボット理工学科 演習HP]( https://robot.isc.chubu.ac.jp/?p=1469)
